/**
* @license
* Copyright 2022 OneLoop.js
* Author: Nicolas Langle
* Repository: https://github.com/n-langle/OneLoop.js
* Version: 2.1.1
* SPDX-License-Identifier: MIT
* 
* Credit for easing functions goes to : https://github.com/ai/easings.net/blob/master/src/easings/easingsFunctions.ts
* Credit for Emoji regexp goes to : https://medium.com/reactnative/emojis-in-javascript-f693d0eb79fb
*/
e=Math.pow,n=Math.sqrt,i=Math.sin,s=Math.cos,r=Math.PI,u=1.525*(o=1.70158),h=1+o,a=2*r/3,c=2*r/4.5;var e,n,i,s,r,o,u,h,a,c,l={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return 1-(1-t)*(1-t)},easeInOutQuad:function(t){return t<.5?2*t*t:1-e(-2*t+2,2)/2},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1-e(1-t,3)},easeInOutCubic:function(t){return t<.5?4*t*t*t:1-e(-2*t+2,3)/2},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1-e(1-t,4)},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-e(-2*t+2,4)/2},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1-e(1-t,5)},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1-e(-2*t+2,5)/2},easeInSine:function(t){return 1-s(t*r/2)},easeOutSine:function(t){return i(t*r/2)},easeInOutSine:function(t){return-(s(r*t)-1)/2},easeInExpo:function(t){return 0===t?0:e(2,10*t-10)},easeOutExpo:function(t){return 1===t?1:1-e(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:t<.5?e(2,20*t-10)/2:(2-e(2,-20*t+10))/2},easeInCirc:function(t){return 1-n(1-e(t,2))},easeOutCirc:function(t){return n(1-e(t-1,2))},easeInOutCirc:function(t){return t<.5?(1-n(1-e(2*t,2)))/2:(n(1-e(-2*t+2,2))+1)/2},easeInBack:function(t){return h*t*t*t-o*t*t},easeOutBack:function(t){return 1+h*e(t-1,3)+o*e(t-1,2)},easeInOutBack:function(t){return t<.5?e(2*t,2)*(2*(1+u)*t-u)/2:(e(2*t-2,2)*((1+u)*(2*t-2)+u)+2)/2},easeInElastic:function(t){return 0===t?0:1===t?1:-e(2,10*t-10)*i((10*t-10.75)*a)},easeOutElastic:function(t){return 0===t?0:1===t?1:e(2,-10*t)*i((10*t-.75)*a)+1},easeInOutElastic:function(t){return 0===t?0:1===t?1:t<.5?-(e(2,20*t-10)*i((20*t-11.125)*c))/2:e(2,-20*t+10)*i((20*t-11.125)*c)/2+1},easeInBounce:function(t){return 1-d(1-t)},easeOutBounce:d,easeInOutBounce:function(t){return t<.5?(1-d(1-2*t))/2:(1+d(2*t-1))/2}};function d(t){var e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375}var f=[],p=null,_={add:function(t){return-1===f.indexOf(t)&&(f.push(t),null===p&&this.start()),this},remove:function(t){t=f.indexOf(t);return-1<t&&f.splice(t,1)[0].stop(),this},start:function(){var s;return null===p&&(s=performance.now(),p=requestAnimationFrame(function t(e){for(var n=(e-s)/(1e3/60),i=0;i<f.length;i++)f[i].needsUpdate(e)?f[i].update(e,n):(f.splice(i,1)[0].complete(e,n),i--);p=f.length?(s=e,requestAnimationFrame(t)):null})),this},stop:function(){return cancelAnimationFrame(p),p=null,this},destroy:function(){f.length=0,this.stop()}};function v(){for(var t,e=arguments,n=e[0],i=1;i<e.length;i++)for(t in e[i])void 0!==e[i][t]&&(n[t]=e[i][t]);return n}function t(){}function y(t){v(this,y.defaults,t),this._a=0,this.autoStart&&this.start()}function g(t){t=v({},g.defaults,t);this._b=1,this._c=0,this._d=t.reverse?1:0,y.call(this,t)}y.defaults={delay:0,onStart:t,onUpdate:t,onStop:t,onComplete:t,autoStart:!0},v(y.prototype,{start:function(t,e){return 0===(t=0===t||t?t:this.delay)?(this._a=performance.now(),_.add(this),this.onStart(this._a,0,e)):setTimeout(this.start.bind(this,0,e),t),this},stop:function(){return _.remove(this),this.onStop(),this},update:function(t,e){return this.onUpdate(t,e),this},complete:function(t,e){return this.onComplete(t,e),this},needsUpdate:function(t){return!0}}),g.defaults={duration:1e3,easing:"linear",loop:0,reverse:!1},v(g.prototype,y.prototype,{start:function(t){return this.reverse&&(this._b=m[this._d](this._c),this._d=(this._d+1)%2),y.prototype.start.call(this,t,1-this._b)},update:function(t,e){var n=l[this.easing]((t-this._a)/(this.duration*this._b))*this._b+1-this._b,n=m[this._d](n);return this._c=n,this.onUpdate(t,e,n),this},complete:function(t,e){var n=(this._d+1)%2;return this.onUpdate(t,e,n),this.onComplete(t,e,n),0<this.loop&&(this.loop--,this.start()),this},needsUpdate:function(t){return t-this._a<this.duration*this._b}});var m=[function(t){return t},function(t){return 1-t}];function b(t,e){return"string"==typeof t?(e||document).querySelectorAll(t):0<=t.length?t:[t]}var T=[];function O(t,e){y.call(this,{autoStart:!1});var n={};n[e+"start"]=[],n[e]=[],n[e+"end"]=[],this._e=n,this._f=!1,this._g=function(){this._f=!1}.bind(this),this._h=function(t){this._l=t,this._f||(this._f=!0,this.start(),w(this._e[this._k+"start"],t));clearTimeout(this._i),this._i=setTimeout(this._g,128)}.bind(this),this._i=null,this._j=t,this._k=e,this._l=null,this._j.addEventListener(this._k,this._h)}function w(t,e){for(var n=0;n<t.length;n++)t[n](e)}function I(t,e,n){v(this,I.defaults,e),this.element=t,this._m=!1,this.children=this.children?b(this.children,this.element):[],this.refresh(n)}function M(t){return Math.abs(Math.round(t))}v(O.prototype,y.prototype,{destroy:function(){for(var t=0;t<T.length;t++)T[t].instance===this&&T.splice(t,1);this._j.removeEventListener(this._k,this._h)},add:function(t,e){return-1===this._e[t].indexOf(e)&&this._e[t].push(e),this},remove:function(t,e){e=this._e[t].indexOf(e);return-1<e&&this._e[t].splice(e,1),this},hasEvent:function(){var t=this._e,e=this._k;return 0<t[e+"start"].length+t[e].length+t[e+"end"].length},update:function(t,e){return w(this._e[this._k],this._l),this},complete:function(t,e){return w(this._e[this._k+"end"],this._l),this},needsUpdate:function(t){return this._f}}),O.getInstance=function(t,e){for(var n,i=0;i<T.length;i++)T[i].eventType===e&&T[i].target===t&&(n=T[i].instance);return n||(n=new O(t,e),T.push({instance:n,target:t,eventType:e})),n},O.destroy=function(){for(;T.length;)T[0].instance.destroy()},I.defaults={children:"",onVisible:t,onVisibilityStart:t,onVisibilityEnd:t,onAlways:t},v(I.prototype,{refresh:function(t){var e=this.element.getBoundingClientRect(),n=window.pageYOffset,i=window.innerHeight;return this.distanceRTW=i+e.bottom-e.top,this.startRTW=e.bottom-this.distanceRTW+n,this.startRTE=Math.max(e.top+n-i,0),this.distanceRTE=Math.min(e.bottom+n-this.startRTE,document.documentElement.scrollHeight-i),this.boundingClientRect=e,this.control(t),this},control:function(t){var e=(t.y-this.startRTW)/this.distanceRTW,n=(t.y-this.startRTE)/this.distanceRTE;return 0<=e&&e<=1?(this._m||(this._m=!0,this.onVisibilityStart.call(this,t,M(e),M(n)),this.onVisible.call(this,t,M(e),M(n))),this.onVisible.call(this,t,e,n)):this._m&&(this._m=!1,this.onVisible.call(this,t,M(e),M(n)),this.onVisibilityEnd.call(this,t,M(e),M(n))),this.onAlways.call(this,t,e,n),this}});var S=[],E=null,R=null,H=null;function L(t){y.call(this,v({},L.defaults,t,{autoStart:!1})),this._n=[],this._o=[],this._p=this.start.bind(this),this._q=this.refresh.bind(this),(this._r=0)===S.length&&(R=new O(window,"resize"),H=new O(window,"scroll")),R.add("resize",this._q),H.add("scrollstart",this._p),S.push(this),L.startAutoRefresh()}function x(){var t=document.documentElement,e=document.body;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}L.defaults={scrollDivider:1},v(L.prototype,y.prototype,{destroy:function(){S.splice(S.indexOf(this),1),0===S.length?(L.stopAutoRefresh(),R.destroy(),H.destroy(),R=H=null):(R.remove("resize",this._q),H.remove("scrollstart",this._p))},observe:function(t,e){for(var n=b(t),i=this.getScrollInfos(),s=0;s<n.length;s++)-1===this._n.indexOf(t)&&(this._o.push(new I(n[s],e,i)),this._n.push(n[s]));return this},unobserve:function(t){for(var e,n=b(t),i=0;i<n.length;i++)-1<(e=this._n.indexOf(t))&&(this._n.splice(e,1),this._o.splice(e,1));return this},update:function(t,e){this.onUpdate(t,e);for(var n=this.getScrollInfos(),i=0;i<this._o.length;i++)this._o[i].control(n);return this._r=n.y,this},needsUpdate:function(t){return H.needsUpdate()||1<this.scrollDivider&&1<Math.abs(window.pageYOffset-this._r)},getScrollInfos:function(){var t=this._r+(window.pageYOffset-this._r)/this.scrollDivider,e=t-this._r;return{y:t,deltaY:e,directionY:e/Math.abs(e)||0}},refresh:function(){for(var t=this.getScrollInfos(),e=0;e<this._o.length;e++)this._o[e].refresh(t);return this}}),L.autoRefreshDelay=1e3,L.startAutoRefresh=function(){var n;return null===E&&null!==L.autoRefreshDelay&&(n=x(),E=setInterval(function(){var t,e=x();if(e!==n){for(t=0;t<S.length;t++)S[t].refresh();n=e}},L.autoRefreshDelay)),this},L.stopAutoRefresh=function(){return clearInterval(E),E=null,this},L.destroy=function(){for(;S.length;)S[0].destroy()};var W=[],C=null,q=new RegExp("(?:[✀-➿]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[#-9]️?⃣|㊙|㊗|〽|〰|Ⓜ|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|🆎|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|🈚|🈯|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|‼|⁉|[▪-▫]|▶|◀|[◻-◾]|©|®|™|ℹ|🀄|[☀-⛿]|⬅|⬆|⬇|⬛|⬜|⭐|⭕|⌚|⌛|⌨|⏏|[⏩-⏳]|[⏸-⏺]|🃏|⤴|⤵|[←-⇿])","g");function U(t,e){v(this,U.defaults,e),this._s=t.innerHTML,this._t=t,this._q=function(){this.restore().split()}.bind(this),C=C||new O(window,"resize"),this.autoSplit&&this.split(),W.push(this)}function k(t,e,n,i){for(var s,r=t.childNodes,o="",u=0;u<r.length;u++)3===(s=r[u]).nodeType?""!==s.data.trim()?o+=s.data.split(e).map(n).join(e):o+=s.data:1===s.nodeType&&(i&&s.classList.contains(i)?o+=s.outerHTML:o+=A(s,k(s,e,n)));return o}function A(t,e){return t.outerHTML.replace(">"+t.innerHTML+"<",">"+e+"<")}U.defaults={autoSplit:!0,byLine:!1,byWord:!1,byChar:!1,preserve:"st-char",lineWrapper:function(t){return'<span class="st-line">'+t+"</span>"},wordWrapper:function(t){return'<span class="st-word">'+t+"</span>"},charWrapper:function(t){return'<span class="st-char">'+t+"</span>"}},v(U.prototype,{destroy:function(){this.restore(),W.splice(W.indexOf(this),1),W.length||(C.destroy(),C=null)},restore:function(){return this._t.innerHTML=this._s,C.remove("resize",this._q),this},split:function(){var t,e,n,i,s=this._t,r=this,o="",u="";if((this.byWord||this.byLine)&&(s.innerHTML=k(s," ",this.wordWrapper)),this.byLine){for(C.add("resize",this._q),t=(n=s.children)[0].offsetTop,i=0;i<n.length;i++)t!==(e=n[i].offsetTop)&&(u+=this.lineWrapper(o.substring(-1))+" ",o=""),t=e,o+=n[i].outerHTML+" ";s.innerHTML=u+this.lineWrapper(o)}return this.byChar&&(s.innerHTML=function t(e,n){var i,s,r=e.childNodes,o="";for(s=0;s<r.length;s++)3===(i=r[s]).nodeType?o+=i.data.replace(q,n):1===i.nodeType&&(o+=A(i,t(i,n)));return o}(s,this.charWrapper),s.innerHTML=k(s,"",function(t){return" "!==t?r.charWrapper(t):" "},this.preserve)),this}}),U.destroy=function(){for(;W[0];)W[0].destroy()};export{y as MainLoopEntry,L as ScrollObserver,U as SplittedText,O as ThrottledEvent,g as Tween,l as easings};
