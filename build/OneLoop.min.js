/**
* @license
* Copyright 2022 OneLoop.js
* Author: Nicolas Langle
* Repository: https://github.com/n-langle/OneLoop.js
* Version: 4.0.0
* SPDX-License-Identifier: MIT
* 
* Credit for easing functions goes to : https://github.com/ai/easings.net/blob/master/src/easings/easingsFunctions.ts
* Credit for Emoji regexp goes to : https://medium.com/reactnative/emojis-in-javascript-f693d0eb79fb
*/
n=Math.pow,e=Math.sqrt,i=Math.sin,s=Math.cos,r=Math.PI,o=1.525*(u=1.70158),h=1+u,a=2*r/3,c=2*r/4.5;var n,e,i,s,r,u,o,h,a,c,A={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return 1-(1-t)*(1-t)},easeInOutQuad:function(t){return t<.5?2*t*t:1-n(-2*t+2,2)/2},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1-n(1-t,3)},easeInOutCubic:function(t){return t<.5?4*t*t*t:1-n(-2*t+2,3)/2},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1-n(1-t,4)},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-n(-2*t+2,4)/2},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1-n(1-t,5)},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1-n(-2*t+2,5)/2},easeInSine:function(t){return 1-s(t*r/2)},easeOutSine:function(t){return i(t*r/2)},easeInOutSine:function(t){return-(s(r*t)-1)/2},easeInExpo:function(t){return 0===t?0:n(2,10*t-10)},easeOutExpo:function(t){return 1===t?1:1-n(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:t<.5?n(2,20*t-10)/2:(2-n(2,-20*t+10))/2},easeInCirc:function(t){return 1-e(1-n(t,2))},easeOutCirc:function(t){return e(1-n(t-1,2))},easeInOutCirc:function(t){return t<.5?(1-e(1-n(2*t,2)))/2:(e(1-n(-2*t+2,2))+1)/2},easeInBack:function(t){return h*t*t*t-u*t*t},easeOutBack:function(t){return 1+h*n(t-1,3)+u*n(t-1,2)},easeInOutBack:function(t){return t<.5?n(2*t,2)*(2*(1+o)*t-o)/2:(n(2*t-2,2)*((1+o)*(2*t-2)+o)+2)/2},easeInElastic:function(t){return 0===t?0:1===t?1:-n(2,10*t-10)*i((10*t-10.75)*a)},easeOutElastic:function(t){return 0===t?0:1===t?1:n(2,-10*t)*i((10*t-.75)*a)+1},easeInOutElastic:function(t){return 0===t?0:1===t?1:t<.5?-(n(2,20*t-10)*i((20*t-11.125)*c))/2:n(2,-20*t+10)*i((20*t-11.125)*c)/2+1},easeInBounce:function(t){return 1-f(1-t)},easeOutBounce:f,easeInOutBounce:function(t){return t<.5?(1-f(1-2*t))/2:(1+f(2*t-1))/2}};function f(t){var n=7.5625,e=2.75;return t<1/e?n*t*t:t<2/e?n*(t-=1.5/e)*t+.75:t<2.5/e?n*(t-=2.25/e)*t+.9375:n*(t-=2.625/e)*t+.984375}var l=[],d=null,p={add:function(t){return-1===l.indexOf(t)&&(l.push(t),null===d&&this.start()),this},remove:function(t){t=l.indexOf(t);return-1<t&&l.splice(t,1),this},start:function(){var s;return null===d&&(s=performance.now(),d=requestAnimationFrame(function t(n){for(var e=(n-s)/16.66,i=0;i<l.length;i++)l[i].needsUpdate(n)?l[i].update(n,e):(l.splice(i,1)[0].complete(n,e),i--);d=l.length?(s=n,requestAnimationFrame(t)):null})),this},stop:function(){return cancelAnimationFrame(d),d=null,this},destroy:function(){l.length=0,this.stop()}};function _(){for(var t,n=arguments,e=n[0],i=1;i<n.length;i++)for(t in n[i])void 0!==n[i][t]&&(e[t]=n[i][t]);return e}function t(){}function v(){return performance.now()}function b(t){_(this,b.defaults,t)}function m(t){b.call(this,_({},m.defaults,t)),this._a=0,this._b=1,this._c=0,this._d=this.reverse?1:0,this._e=0,this._f=null,this.autoStart&&this.start()}b.defaults={onStart:t,onUpdate:t,onStop:t,onComplete:t},_(b.prototype,{start:function(){return p.add(this),this.onStart(v(),0),this},stop:function(){return p.remove(this),this.onStop(v(),0),this},update:function(t,n){return this.onUpdate(t,n),this},complete:function(t,n){return this.onComplete(t,n),this},needsUpdate:function(t){return!0}}),m.defaults={delay:0,duration:1e3,easing:"linear",loop:0,reverse:!1,autoStart:!0},_(m.prototype,b.prototype,{reset:function(){return this._f=null,this._b=1,this._c=0,this._d=this.reverse?1:0,p.remove(this),this.onUpdate(0,0,0),this},pause:function(){return this._f=v(),p.remove(this),this},start:function(t){return 0===(t=0===t||t?t:this.delay)?(this._f?(this._e+=v()-this._f,this._f=null):(this.reverse&&(this._b=Q[this._d](this._c),this._d=(this._d+1)%2),this._e=0,this._a=v(),this.onStart(this._a,0,1-this._b)),p.add(this)):setTimeout(this.start.bind(this,0),t),this},update:function(t,n){var e=A[this.easing]((t-(this._a+this._e))/(this.duration*this._b))*this._b+1-this._b,e=Q[this._d](e);return this._c=e,this.onUpdate(t,n,e),this},complete:function(t,n){var e=(this._d+1)%2;return this._f=null,this.onUpdate(t,n,e),this.onComplete(t,n,e),0<this.loop&&(this.loop--,this.start()),this},needsUpdate:function(t){return t-(this._a+this._e)<this.duration*this._b}});var Q=[function(t){return t},function(t){return 1-t}];function g(t,n){return"string"==typeof t?(n||document).querySelectorAll(t):0<=t.length?t:[t]}var y=[];function T(t,n){b.call(this);var e={};e[n+"start"]=[],e[n]=[],e[n+"end"]=[],this._g=e,this._h=!1,this._i=function(){this._h=!1}.bind(this),this._j=function(t){this._n=t,this._h||(this._h=!0,this.start(),O(this._g[this._m+"start"],t));clearTimeout(this._k),this._k=setTimeout(this._i,128)}.bind(this),this._k=null,this._l=t,this._m=n,this._n=null,this._l.addEventListener(this._m,this._j)}function O(t,n){for(var e=0;e<t.length;e++)t[e](n)}function w(t,n,e){_(this,w.defaults,n),this.element=t,this._o=!1,this.children=this.children?g(this.children,this.element):[],this.refresh(e)}function I(t){return Math.abs(Math.round(t))}_(T.prototype,b.prototype,{destroy:function(){var t=y.indexOf(this);-1<t&&y.splice(t,1),this._l.removeEventListener(this._m,this._j)},add:function(t,n){return-1===this._g[t].indexOf(n)&&this._g[t].push(n),this},remove:function(t,n){n=this._g[t].indexOf(n);return-1<n&&this._g[t].splice(n,1),this},hasEvent:function(){var t=this._g,n=this._m;return 0<t[n+"start"].length+t[n].length+t[n+"end"].length},update:function(t,n){return O(this._g[this._m],this._n),this.onUpdate(t,n),this},complete:function(t,n){return O(this._g[this._m+"end"],this._n),this.onComplete(t,n),this},needsUpdate:function(t){return this._h}}),T.getInstance=function(t,n){for(var e,i=0;i<y.length;i++)if(y[i]._m===n&&y[i]._l===t){e=y[i];break}return e||(e=new T(t,n),y.push(e)),e},T.destroy=function(){for(;y[0];)y[0].destroy()},w.defaults={children:"",onVisible:t,onVisibilityStart:t,onVisibilityEnd:t,onAlways:t},_(w.prototype,{refresh:function(t){var n=this.element.getBoundingClientRect(),e=window.pageYOffset,i=window.innerHeight;return this.distanceRTW=i+n.bottom-n.top,this.startRTW=n.bottom-this.distanceRTW+e,this.startRTE=Math.max(n.top+e-i,0),this.distanceRTE=Math.min(n.bottom+e-this.startRTE,document.documentElement.scrollHeight-i),this.control(t),this},control:function(t){var n=(t.y-this.startRTW)/this.distanceRTW,e=(t.y-this.startRTE)/this.distanceRTE;return 0<=n&&n<=1?(this._o||(this._o=!0,this.onVisibilityStart.call(this,t,I(n),I(e)),this.onVisible.call(this,t,I(n),I(e))),this.onVisible.call(this,t,n,e)):this._o&&(this._o=!1,this.onVisible.call(this,t,I(n),I(e)),this.onVisibilityEnd.call(this,t,I(n),I(e))),this.onAlways.call(this,t,n,e),this}});var M=[],E=null,H=null,L=null;function S(t){b.call(this,_({},S.defaults,t)),this._p=[],this._q=[],this._r=this.start.bind(this),this._s=this.refresh.bind(this),this._t=0,this._h=!0,0===M.length&&(H=new T(window,"resize"),L=new T(window,"scroll")),H.add("resize",this._s),L.add("scrollstart",this._r),M.push(this),S.startAutoRefresh()}function B(){var t=document.documentElement,n=document.body;return Math.max(n.scrollHeight,n.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}S.defaults={scrollDivider:1},_(S.prototype,b.prototype,{destroy:function(){this._h&&(this._h=!1,M.splice(M.indexOf(this),1),0===M.length?(S.stopAutoRefresh(),H.destroy(),L.destroy(),H=L=null):(H.remove("resize",this._s),L.remove("scrollstart",this._r)))},observe:function(t,n){for(var e=g(t),i=this.getScrollInfos(),s=0;s<e.length;s++)-1===this._p.indexOf(e[s])&&(this._q.push(new w(e[s],n,i)),this._p.push(e[s]));return this},unobserve:function(t){for(var n,e=g(t),i=0;i<e.length;i++)-1<(n=this._p.indexOf(e[i]))&&(this._p.splice(n,1),this._q.splice(n,1));return this},update:function(t,n){this.onUpdate(t,n);for(var e=this.getScrollInfos(),i=0;i<this._q.length;i++)this._q[i].control(e);return this._t=e.y,this},needsUpdate:function(t){return this._h&&L.needsUpdate()||1<this.scrollDivider&&1<Math.abs(window.pageYOffset-this._t)},hasEntry:function(){return 0<this._q.length},getScrollInfos:function(){var t=this._t+(window.pageYOffset-this._t)/this.scrollDivider,n=t-this._t;return{y:t,deltaY:n,directionY:n/Math.abs(n)||0}},refresh:function(){for(var t=this.getScrollInfos(),n=0;n<this._q.length;n++)this._q[n].refresh(t);return this}}),S.autoRefreshDelay=1e3,S.startAutoRefresh=function(){var e;return null===E&&null!==S.autoRefreshDelay&&(e=B(),E=setInterval(function(){var t,n=B();if(n!==e){for(t=0;t<M.length;t++)M[t].refresh();e=n}},S.autoRefreshDelay)),this},S.stopAutoRefresh=function(){return clearInterval(E),E=null,this};var R=[],x=null,V=/(((?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])((\u200D(\u2640|\u2642)\uFE0F)|[]))|&([a-zA-Z]{2,6}|#[0-9]{2,5});|<|>)/g,k=/(\s)/;function W(t,n){_(this,W.defaults,n),this._u=t.innerHTML,this._v=t,this._s=this.split.bind(this),x=x||new T(window,"resize"),this.autoSplit&&this.split(),R.push(this)}function C(t,n,e){for(var i,s=t.childNodes,r="",u=0;u<s.length;u++)3===(i=s[u]).nodeType?r+=n(i.data):1===i.nodeType&&(r+=e(i));return r}function U(t,e,i,n){return C(t,function(t){var n=t.trim();return""!==n?(""===e?t:n).split(e).map(i).join(e):t},function(t){return n&&t.classList.contains(n)?t.outerHTML:q(t,U(t,e,i,n))})}function q(t,n){return t.outerHTML.replace(">"+t.innerHTML+"<",">"+n+"<")}function z(t,n){t.innerHTML=function n(t){return C(t,function(t){return t.replace("<","[<]")},function(t){return q(t,n(t))})}(t),t.innerHTML=U(t," ",n).replace("[<]","&lt;")}W.defaults={autoSplit:!0,byLine:!(S.destroy=function(){for(;M[0];)M[0].destroy()}),byWord:!1,byChar:!1,preserve:"st-char",lineWrapper:function(t){return'<span class="st-line">'+t+"</span>"},wordWrapper:function(t){return'<span class="st-word">'+t+"</span>"},charWrapper:function(t){return'<span class="st-char">'+t+"</span>"}},_(W.prototype,{destroy:function(){this.restore(),R.splice(R.indexOf(this),1),R.length||(x.destroy(),x=null)},restore:function(){return this._v.innerHTML=this._u,x.remove("resize",this._s),this},split:function(){function t(t,n){return t?h.lineWrapper(t)+n:""}var n,e,i,s,r,u,o=this._v,h=this,a="",c="";if(o.innerHTML=this._u,this.byLine){for(x.add("resize",this._s),z(o,function(t){return'<span class="st-word-temp">'+t+"</span>"}),n=(i=o.children)[0].offsetTop,r=0;r<i.length;r++)e=(s=i[r]).offsetTop,u="BR"===s.tagName,n===e&&!u||(c+=t(a.substring(-1)," "),a=""),u?c+="<br />":a+=s.outerHTML+" ",n=e;o.innerHTML=c+t(a,""),o.innerHTML=function n(t,e){return C(t,function(t){return t},function(t){return t.classList.contains(e)?t.innerHTML:q(t,n(t,e))})}(o,"st-word-temp")}return this.byWord&&z(o,this.wordWrapper),this.byChar&&(o.innerHTML=function n(t,e){return C(t,function(t){return t.replace(V,e)},function(t){return q(t,n(t,e))})}(o,this.charWrapper),o.innerHTML=U(o,"",function(t){return k.test(t)?t:h.charWrapper(t)},this.preserve)),this}}),W.destroy=function(){for(;R[0];)R[0].destroy()};export{b as MainLoopEntry,S as ScrollObserver,W as SplittedText,T as ThrottledEvent,m as Tween,A as easings};
