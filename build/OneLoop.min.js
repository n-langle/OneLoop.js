/**
* @license
* Copyright 2022 OneLoop.js
* Author: Nicolas Langle
* Repository: https://github.com/n-langle/OneLoop.js
* Version: 5.0.0
* SPDX-License-Identifier: MIT
* 
* Credit for easing functions goes to : https://github.com/ai/easings.net/blob/master/src/easings/easingsFunctions.ts
* Credit for Emoji regexp goes to : https://medium.com/reactnative/emojis-in-javascript-f693d0eb79fb
*/
var r=function(){const e=Math.pow,s=Math.sqrt,r=Math.sin,i=Math.cos,n=Math.PI,u=1.70158,h=1.525*u,a=1+u,o=2*n/3,l=2*n/4.5;function d(t){var e=7.5625,s=2.75;return t<1/s?e*t*t:t<2/s?e*(t-=1.5/s)*t+.75:t<2.5/s?e*(t-=2.25/s)*t+.9375:e*(t-=2.625/s)*t+.984375}return{linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return 1-(1-t)*(1-t)},easeInOutQuad(t){return t<.5?2*t*t:1-e(-2*t+2,2)/2},easeInCubic(t){return t*t*t},easeOutCubic(t){return 1-e(1-t,3)},easeInOutCubic(t){return t<.5?4*t*t*t:1-e(-2*t+2,3)/2},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1-e(1-t,4)},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-e(-2*t+2,4)/2},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1-e(1-t,5)},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1-e(-2*t+2,5)/2},easeInSine(t){return 1-i(t*n/2)},easeOutSine(t){return r(t*n/2)},easeInOutSine(t){return-(i(n*t)-1)/2},easeInExpo(t){return 0===t?0:e(2,10*t-10)},easeOutExpo(t){return 1===t?1:1-e(2,-10*t)},easeInOutExpo(t){return 0===t?0:1===t?1:t<.5?e(2,20*t-10)/2:(2-e(2,-20*t+10))/2},easeInCirc(t){return 1-s(1-e(t,2))},easeOutCirc(t){return s(1-e(t-1,2))},easeInOutCirc(t){return t<.5?(1-s(1-e(2*t,2)))/2:(s(1-e(-2*t+2,2))+1)/2},easeInBack(t){return a*t*t*t-u*t*t},easeOutBack(t){return 1+a*e(t-1,3)+u*e(t-1,2)},easeInOutBack(t){return t<.5?e(2*t,2)*(2*(1+h)*t-h)/2:(e(2*t-2,2)*((1+h)*(2*t-2)+h)+2)/2},easeInElastic(t){return 0===t?0:1===t?1:-e(2,10*t-10)*r((10*t-10.75)*o)},easeOutElastic(t){return 0===t?0:1===t?1:e(2,-10*t)*r((10*t-.75)*o)+1},easeInOutElastic(t){return 0===t?0:1===t?1:t<.5?-(e(2,20*t-10)*r((20*t-11.125)*l))/2:e(2,-20*t+10)*r((20*t-11.125)*l)/2+1},easeInBounce(t){return 1-d(1-t)},easeOutBounce:d,easeInOutBounce(t){return t<.5?(1-d(1-2*t))/2:(1+d(2*t-1))/2}}}();const i=[];let n=null;var e={add(t){return-1===i.indexOf(t)&&(i.push(t),null===n&&this.start()),this},remove(t){t=i.indexOf(t);return-1<t&&i.splice(t,1),this},start(){if(null===n){let r=performance.now();n=requestAnimationFrame(function t(e){var s=(e-r)/16.66;for(let t=0;t<i.length;t++)i[t].needsUpdate(e)?i[t].update(e,s):(i.splice(t,1)[0].complete(e,s),t--);n=i.length?(r=e,requestAnimationFrame(t)):null})}return this},stop(){return cancelAnimationFrame(n),n=null,this},destroy(){i.length=0,this.stop()}};function u(){const e=arguments,s=e[0];for(let t=1;t<e.length;t++)for(var r in e[t])void 0!==e[t][r]&&(s[r]=e[t][r]);return s}function t(){}function s(){return performance.now()}class h{constructor(t){u(this,h.defaults,t)}start(){return e.add(this),this.onStart(s(),0),this}stop(){return e.remove(this),this.onStop(s(),0),this}update(t,e){return this.onUpdate(t,e),this}complete(t,e){return this.onComplete(t,e),this}needsUpdate(t){return!0}}h.defaults={onStart:t,onUpdate:t,onStop:t,onComplete:t};class a extends h{constructor(t){super(u({},a.defaults,t)),this._a=0,this._b=1,this._c=0,this._d=this.reverse?1:0,this._e=0,this._f=null,this.autoStart&&this.start()}reset(){return this._f=null,this._b=1,this._c=0,this._d=this.reverse?1:0,e.remove(this),this.onUpdate(0,0,0),this}pause(){return this._f=s(),e.remove(this),this}start(t){return 0===(t=0===t||t?t:this.delay)?(this._f?(this._e+=s()-this._f,this._f=null):(this.reverse&&(this._b=o[this._d](this._c),this._d=(this._d+1)%2),this._e=0,this._a=s(),this.onStart(this._a,0,1-this._b)),e.add(this)):setTimeout(this.start.bind(this,0),t),this}update(t,e){var s=r[this.easing]((t-(this._a+this._e))/(this.duration*this._b))*this._b+1-this._b,s=o[this._d](s);return this._c=s,this.onUpdate(t,e,s),this}complete(t,e){var s=(this._d+1)%2;return this._f=null,this.onUpdate(t,e,s),this.onComplete(t,e,s),0<this.loop&&(this.loop--,this.start()),this}needsUpdate(t){return t-(this._a+this._e)<this.duration*this._b}}a.defaults={delay:0,duration:1e3,easing:"linear",loop:0,reverse:!1,autoStart:!0};const o=[function(t){return t},function(t){return 1-t}];function l(t,e){return"string"==typeof t?(e||document).querySelectorAll(t):0<=t.length?t:[t]}var d=[];class c extends h{constructor(t,e){super();const s={};s[e+"start"]=[],s[e]=[],s[e+"end"]=[],this._g=s,this._h=!1,this._i=function(){this._h=!1}.bind(this),this._j=function(t){this._n=t,this._h||(this._h=!0,this.start(),f(this._g[this._m+"start"],t));clearTimeout(this._k),this._k=setTimeout(this._i,128)}.bind(this),this._k=null,this._l=t,this._m=e,this._n=null,this._l.addEventListener(this._m,this._j,{passive:!0})}destroy(){var t=d.indexOf(this);-1<t&&d.splice(t,1),this._l.removeEventListener(this._m,this._j)}add(t,e){return-1===this._g[t].indexOf(e)&&this._g[t].push(e),this}remove(t,e){e=this._g[t].indexOf(e);return-1<e&&this._g[t].splice(e,1),this}hasEvent(){var t=this._g,e=this._m;return 0<t[e+"start"].length+t[e].length+t[e+"end"].length}update(t,e){return f(this._g[this._m],this._n),this.onUpdate(t,e),this}complete(t,e){return f(this._g[this._m+"end"],this._n),this.onComplete(t,e),this}needsUpdate(t){return this._h}}function f(e,s){for(let t=0;t<e.length;t++)e[t](s)}c.getInstance=function(e,s){let r;for(let t=0;t<d.length;t++)if(d[t]._m===s&&d[t]._l===e){r=d[t];break}return r||(r=new c(e,s),d.push(r)),r},c.destroy=function(){for(;d[0];)d[0].destroy()};class p{constructor(t,e,s){u(this,p.defaults,e),this.element=t,this._o=!1,this.children=this.children?l(this.children,this.element):[],this.refresh(s)}refresh(t){var e=this.element.getBoundingClientRect(),s=window.pageYOffset,r=window.innerHeight;return this.distanceRTW=r+e.bottom-e.top,this.startRTW=e.bottom-this.distanceRTW+s,this.startRTE=Math.max(e.top+s-r,0),this.distanceRTE=Math.min(e.bottom+s-this.startRTE,document.documentElement.scrollHeight-r),this.control(t),this}control(t){var e=(t.y-this.startRTW)/this.distanceRTW,s=(t.y-this.startRTE)/this.distanceRTE;return 0<=e&&e<=1?(this._o||(this._o=!0,this.onVisibilityStart.call(this,t,_(e),_(s)),this.onVisible.call(this,t,_(e),_(s))),this.onVisible.call(this,t,e,s)):this._o&&(this._o=!1,this.onVisible.call(this,t,_(e),_(s)),this.onVisibilityEnd.call(this,t,_(e),_(s))),this.onAlways.call(this,t,e,s),this}}function _(t){return Math.abs(Math.round(t))}p.defaults={children:"",onVisible:t,onVisibilityStart:t,onVisibilityEnd:t,onAlways:t};const b=[];let m=null,v=null,g=null;class y extends h{constructor(t){super(u({},y.defaults,t)),this._p=[],this._q=[],this._r=this.start.bind(this),this._s=this.refresh.bind(this),this._t=0,this._h=!0,0===b.length&&(v=new c(window,"resize"),g=new c(window,"scroll")),v.add("resize",this._s),g.add("scrollstart",this._r),b.push(this),y.startAutoRefresh()}destroy(){this._h&&(this._h=!1,b.splice(b.indexOf(this),1),0===b.length?(y.stopAutoRefresh(),v.destroy(),g.destroy(),v=g=null):(v.remove("resize",this._s),g.remove("scrollstart",this._r)))}observe(t,e){var s=l(t),r=this.getScrollInfos();for(let t=0;t<s.length;t++)-1===this._p.indexOf(s[t])&&(this._q.push(new p(s[t],e,r)),this._p.push(s[t]));return this}unobserve(t){var e=l(t);for(let t=0;t<e.length;t++){var s=this._p.indexOf(e[t]);-1<s&&(this._p.splice(s,1),this._q.splice(s,1))}return this}update(t,e){this.onUpdate(t,e);var s=this.getScrollInfos();for(let t=0;t<this._q.length;t++)this._q[t].control(s);return this._t=s.y,this}needsUpdate(t){return this._h&&g.needsUpdate()||1<this.scrollDivider&&1<Math.abs(window.pageYOffset-this._t)}hasEntry(){return 0<this._q.length}getScrollInfos(){var t=this._t+(window.pageYOffset-this._t)/this.scrollDivider,e=t-this._t;return{y:t,deltaY:e,directionY:e/Math.abs(e)||0}}refresh(){var e=this.getScrollInfos();for(let t=0;t<this._q.length;t++)this._q[t].refresh(e);return this.onRefresh(e),this}}function T(){var t=document.documentElement,e=document.body;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}y.defaults={scrollDivider:1,onRefresh:t},y.autoRefreshDelay=1e3,y.startAutoRefresh=function(){if(null===m&&null!==y.autoRefreshDelay){let e=T();m=setInterval(function(){var t=T();if(t!==e){for(let t=0;t<b.length;t++)b[t].refresh();e=t}},y.autoRefreshDelay)}return this},y.stopAutoRefresh=function(){return clearInterval(m),m=null,this},y.destroy=function(){for(;b[0];)b[0].destroy()};const O=[],w=/(((?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])((\u200D(\u2640|\u2642)\uFE0F)|[]))|&([a-zA-Z]{2,6}|#[0-9]{2,5});|<|>)/g,I=/(\s)/;let M=null;class E{constructor(t,e){u(this,E.defaults,e),this._u=t.innerHTML,this._v=t,this._s=this.split.bind(this),M=M||new c(window,"resize"),this.autoSplit&&this.split(),O.push(this)}destroy(){this.restore(),O.splice(O.indexOf(this),1),O.length||(M.destroy(),M=null)}restore(){return this._v.innerHTML=this._u,M.remove("resize",this._s),this}split(){const t=this._v;if(t.innerHTML=this._u,this.byLine){S(t,function(t){return'<span class="st-word-temp">'+t+"</span>"});var i=t.children,n=(t,e)=>t?this.lineWrapper(t)+e:"";let e="",s="",r=i[0].offsetTop;M.add("resize",this._s);for(let t=0;t<i.length;t++){var u=i[t],h=u.offsetTop,a="BR"===u.tagName;r===h&&!a||(s+=n(e.substring(-1)," "),e=""),a?s+="<br />":e+=u.outerHTML+" ",r=h}t.innerHTML=s+n(e,""),t.innerHTML=function e(t,s){return H(t,function(t){return t},function(t){return t.classList.contains(s)?t.innerHTML:R(t,e(t,s))})}(t,"st-word-temp")}return this.byWord&&S(t,this.wordWrapper),this.byChar&&(t.innerHTML=function e(t,s){return H(t,function(t){return t.replace(w,s)},function(t){return R(t,e(t,s))})}(t,this.charWrapper),t.innerHTML=L(t,"",t=>I.test(t)?t:this.charWrapper(t),this.preserve)),this}}function H(t,e,s){var r=t.childNodes;let i="";for(let t=0;t<r.length;t++){var n=r[t];3===n.nodeType?i+=e(n.data):1===n.nodeType&&(i+=s(n))}return i}function L(t,s,r,e){return H(t,function(t){var e=t.trim();return""!==e?(""===s?t:e).split(s).map(r).join(s):t},function(t){return e&&t.classList.contains(e)?t.outerHTML:R(t,L(t,s,r,e))})}function R(t,e){return t.outerHTML.replace(">"+t.innerHTML+"<",">"+e+"<")}function S(t,e){t.innerHTML=function e(t){return H(t,function(t){return t.replace("<","[<]")},function(t){return R(t,e(t))})}(t),t.innerHTML=L(t," ",e).replace("[<]","&lt;")}E.defaults={autoSplit:!0,byLine:!1,byWord:!1,byChar:!1,preserve:"st-char",lineWrapper(t){return'<span class="st-line">'+t+"</span>"},wordWrapper(t){return'<span class="st-word">'+t+"</span>"},charWrapper(t){return'<span class="st-char">'+t+"</span>"}},E.destroy=function(){for(;O[0];)O[0].destroy()};export{h as MainLoopEntry,y as ScrollObserver,E as SplittedText,c as ThrottledEvent,a as Tween,r as easings};
