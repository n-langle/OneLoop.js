/**
* @license
* Copyright 2022 OneLoop.js
* Author: Nicolas Langle
* Repository: https://github.com/n-langle/OneLoop.js
* Version: 5.2.1
* SPDX-License-Identifier: MIT
* 
* Credit for easing functions goes to : https://github.com/ai/easings.net/blob/master/src/easings/easingsFunctions.ts
* Credit for Emoji regexp goes to : https://medium.com/reactnative/emojis-in-javascript-f693d0eb79fb
*/
const T=window,K=document.documentElement,o=Math,u=o.pow,C=o.sqrt,v=o.sin,q=o.cos,I=o.PI,Q=o.max,V=o.min,x=o.abs,tt=o.round;var st=function(){const t=2.5949095,e=1.70158+1,i=2*I/3,r=2*I/4.5,h=s=>s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375;return{linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>1-(1-s)*(1-s),easeInOutQuadx:s=>s<.5?2*s*s:1-u(-2*s+2,2)/2,easeInCubic:s=>s*s*s,easeOutCubic:s=>1-u(1-s,3),easeInOutCubic:s=>s<.5?4*s*s*s:1-u(-2*s+2,3)/2,easeInQuart:s=>s*s*s*s,easeOutQuart:s=>1-u(1-s,4),easeInOutQuart:s=>s<.5?8*s*s*s*s:1-u(-2*s+2,4)/2,easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>1-u(1-s,5),easeInOutQuint:s=>s<.5?16*s*s*s*s*s:1-u(-2*s+2,5)/2,easeInSine:s=>1-q(s*I/2),easeOutSine:s=>v(s*I/2),easeInOutSine:s=>-(q(I*s)-1)/2,easeInExpo:s=>s===0?0:u(2,10*s-10),easeOutExpo:s=>s===1?1:1-u(2,-10*s),easeInOutExpo:s=>s===0?0:s===1?1:s<.5?u(2,20*s-10)/2:(2-u(2,-20*s+10))/2,easeInCirc:s=>1-C(1-u(s,2)),easeOutCirc:s=>C(1-u(s-1,2)),easeInOutCirc:s=>s<.5?(1-C(1-u(2*s,2)))/2:(C(1-u(-2*s+2,2))+1)/2,easeInBack:s=>e*s*s*s-1.70158*s*s,easeOutBack:s=>1+e*u(s-1,3)+1.70158*u(s-1,2),easeInOutBack:s=>s<.5?u(2*s,2)*((t+1)*2*s-t)/2:(u(2*s-2,2)*((t+1)*(s*2-2)+t)+2)/2,easeInElastic:s=>s===0?0:s===1?1:-u(2,10*s-10)*v((s*10-10.75)*i),easeOutElastic:s=>s===0?0:s===1?1:u(2,-10*s)*v((s*10-.75)*i)+1,easeInOutElastic:s=>s===0?0:s===1?1:s<.5?-(u(2,20*s-10)*v((20*s-11.125)*r))/2:u(2,-20*s+10)*v((20*s-11.125)*r)/2+1,easeInBounce:s=>1-h(1-s),easeOutBounce:h,easeInOutBounce:s=>s<.5?(1-h(1-2*s))/2:(1+h(2*s-1))/2}}(),E=()=>performance.now();const c=[];let O=null,Y=null;function et(n){const t=(n-Y)/16.66;for(let e=0;e<c.length;e++)c[e].needsUpdate(n)?c[e].update(n,t):(c.splice(e,1)[0].complete(n,t),e--);c.length?(Y=n,O=requestAnimationFrame(et)):O=null}var A={add(n){return c.indexOf(n)===-1&&(c.push(n),O===null&&this.start()),this},remove(n){const t=c.indexOf(n);return t>-1&&c.splice(t,1),this},start(){return O===null&&(Y=E(),O=requestAnimationFrame(et)),this},stop(){return cancelAnimationFrame(O),O=null,this},destroy(){c.length=0,this.stop()}};function k(){const n=arguments,t=n[0];for(let e=1;e<n.length;e++)for(let i in n[e])typeof n[e][i]<"u"&&(t[i]=n[e][i]);return t}var d=()=>{};class R{constructor(t){k(this,R.defaults,t)}start(){return A.add(this),this.onStart.call(this,E(),0),this}stop(){return A.remove(this),this.onStop.call(this,E(),0),this}update(t,e){return this.onUpdate.call(this,t,e),this}complete(t,e){return this.onComplete.call(this,t,e),this}needsUpdate(){return!0}}R.defaults={onStart:d,onUpdate:d,onStop:d,onComplete:d};class P extends R{constructor(t){super(k({},P.defaults,t)),this._a=0,this._b=1,this._c=0,this._d=this.reverse?1:0,this._e=0,this._f=null,this.autoStart&&this.start()}reset(){return this._f=null,this._b=1,this._c=0,this._d=this.reverse?1:0,A.remove(this),this.onUpdate(0,0,0),this}pause(){return this._f=E(),A.remove(this),this}start(t){return t!==0&&!t&&(t=this.delay),t===0?(this._f?(this._e+=E()-this._f,this._f=null):(this.reverse&&(this._b=it[this._d](this._c),this._d=(this._d+1)%2),this._e=0,this._a=E(),this.onStart(this._a,0,1-this._b)),A.add(this)):setTimeout(this.start.bind(this,0),t),this}update(t,e){const i=st[this.easing]((t-(this._a+this._e))/(this.duration*this._b))*this._b+1-this._b,r=it[this._d](i);return this._c=r,this.onUpdate(t,e,r),this}complete(t,e){const i=(this._d+1)%2;return this._c=i,this._f=null,this.onUpdate(t,e,i),this.onComplete(t,e,i),this.loop>0&&(this.loop--,this.start()),this}needsUpdate(t){return t-(this._a+this._e)<this.duration*this._b}}P.defaults={delay:0,duration:1e3,easing:"linear",loop:0,reverse:!1,autoStart:!0};const it=[n=>n,n=>1-n];var Z=(n,t)=>typeof n=="string"?(t||document).querySelectorAll(n):n.length>=0?n:[n];const p=[];class M extends R{constructor(t,e,i){super();const r={};r[e+"start"]=[],r[e]=[],r[e+"end"]=[],this._g=r,this._h=!1,this._i=null,this._j=t,this._k=e,this._l=null,this._m=i||"",this._n=()=>{this._h=!1},this._o=h=>{this._l=h,this._h||(this._h=!0,this.start(),G(this._g[this._k+"start"],h)),clearTimeout(this._i),this._i=setTimeout(this._n,128)},this._j.addEventListener(this._k,this._o,{passive:!0})}destroy(){const t=p.indexOf(this);t>-1&&p.splice(t,1),this._j.removeEventListener(this._k,this._o)}add(t,e){return this._g[t].indexOf(e)===-1&&this._g[t].push(e),this}remove(t,e){const i=this._g[t].indexOf(e);return i>-1&&this._g[t].splice(i,1),this}hasEvent(){const t=this._g,e=this._k;return t[e+"start"].length+t[e].length+t[e+"end"].length>0}update(t,e){return G(this._g[this._k],this._l),super.update(t,e),this}complete(t,e){return G(this._g[this._k+"end"],this._l),super.complete(t,e),this}needsUpdate(){return this._h}static getInstance(t,e,i){let r;i=i||"";for(let h=0;h<p.length;h++){let s=p[h];if(s._k===e&&s._j===t&&s._m===i){r=p[h];break}}return r||(r=new M(t,e,i),p.push(r)),r}static destroy(){for(;p[0];)p[0].destroy()}}function G(n,t){for(let e=0;e<n.length;e++)n[e](t)}class a{constructor(t,e){this.x=t||0,this.y=typeof e=="number"?e:this.x}set(t,e){return this.x=t,this.y=e,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}subtractScalar(t){return this.x-=t,this.y-=t,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.x/=t,this.y/=t,this}magnitude(){return C(this.x*this.x+this.y*this.y)}normalize(){return this.divideScalar(this.magnitude())}reverse(){return this.multiplyScalar(-1)}copy(t){return this.x=t.x,this.y=t.y,this}clone(){return new a(this.x,this.y)}angle(){var t=o.atan2(this.y,this.x);return t<0&&(t+=2*I),t}rotate(t){var e=this.x;return this.x=e*q(t)-this.y*v(t),this.y=e*v(t)+this.y*q(t),this}}var D=()=>new a(K.scrollWidth,K.scrollHeight),z=()=>new a(T.pageXOffset,T.pageYOffset);class X{constructor(t,e,i){k(this,X.defaults,e),this.element=t,this._p=!1,this._q=!1,this.children=this.children?Z(this.children,this.element):[],this.refresh(i),this._p=!0}refresh(t){const e=this.element.getBoundingClientRect(),i=e.height,r=e.width,h=e.right,s=e.bottom,b=T.innerHeight,l=T.innerWidth,f=z(),m=f.x,w=f.y,U=D();return this.distanceRTW=new a(l+r,b+i),this.startRTW=new a(h-this.distanceRTW.x+m,s-this.distanceRTW.y+w),this.startRTE=new a(Q(e.left+m-l,0),Q(e.top+w-b,0)),this.distanceRTE=new a(V(h+m-this.startRTE.x,U.x-h-m+r,U.x-l),V(s+w-this.startRTE.y,U.y-s-w+i,U.y-b)),this.control(t),this}control(t){const e=t.scroll,i=e.clone().subtract(this.startRTW).divide(this.distanceRTW),r=e.clone().subtract(this.startRTE).divide(this.distanceRTE);return r.set(r.x||0,r.y||0),(this.disableCheckOnAxis==="x"||i.x>=0&&i.x<=1)&&(!this.disableCheckOnAxis==="y"||i.y>=0&&i.y<=1)?(this._q||(this._q=!0,this.onVisibilityStart.call(this,t,y(i),y(r)),this.onVisible.call(this,t,y(i),y(r))),this.onVisible.call(this,t,i,r)):(this._q||!this._p)&&(this._q=!1,this.onVisible.call(this,t,y(i),y(r)),this.onVisibilityEnd.call(this,t,y(i),y(r))),this.onAlways.call(this,t,i,r),this}}X.defaults={children:"",disableCheckOnAxis:"",onVisible:d,onVisibilityStart:d,onVisibilityEnd:d,onAlways:d};function y(n){return new a(V(Q(0,tt(n.x)),1),V(Q(0,tt(n.y)),1))}const g=[];let F=null,L=null,S=null;class _ extends R{constructor(t){super(k({},_.defaults,t)),this._r=[],this._s=[],this._t=()=>this.start(),this._u=()=>this.refresh(),this._v=z(),this._h=!0,this._w=D(),L=L||new M(T,"resize"),S=S||new M(T,"scroll"),L.add("resize",this._u),S.add("scrollstart",this._t),g.push(this),_.startAutoRefresh()}destroy(){this._h&&(this._h=!1,g.splice(g.indexOf(this),1),g.length===0?(_.stopAutoRefresh(),L.destroy(),S.destroy(),L=S=null):(L.remove("resize",this._u),S.remove("scrollstart",this._t)))}observe(t,e){const i=Z(t),r=this.getScrollInfos();for(let h=0;h<i.length;h++)this._r.indexOf(i[h])===-1&&(this._s.push(new X(i[h],e,r)),this._r.push(i[h]));return this}unobserve(t){const e=Z(t);for(let i=0;i<e.length;i++){let r=this._r.indexOf(e[i]);r>-1&&(this._r.splice(r,1),this._s.splice(r,1))}return this}update(t,e){super.update(t,e);const i=this.getScrollInfos();for(let r=0;r<this._s.length;r++)this._s[r].control(i);return this._v.copy(i.scroll),this}needsUpdate(){return this._h&&S.needsUpdate()||this.scrollDivider>1&&z().subtract(this._v).magnitude()>1}hasEntry(){return this._s.length>0}getScrollInfos(){const t=this._v,e=z().subtract(t).divideScalar(this.scrollDivider).add(t),i=e.clone().subtract(t);return{scroll:e,delta:i,direction:new a(i.x/x(i.x)||0,i.y/x(i.y)||0)}}refresh(){const t=this.getScrollInfos();for(let e=0;e<this._s.length;e++)this._s[e].refresh(t);return this.onRefresh.call(this,t),this}synchronise(){return this._v=z(),this}static startAutoRefresh(){let t=D();return F===null&&_.autoRefreshDelay!==null&&(F=setInterval(()=>{const e=D();if(t.x!==e.x||t.y!==e.y){for(let i=0;i<g.length;i++)g[i].refresh();t=e}},_.autoRefreshDelay)),this}static stopAutoRefresh(){return clearInterval(F),F=null,this}static destroy(){for(;g[0];)g[0].destroy()}}_.defaults={scrollDivider:1,onRefresh:d},_.autoRefreshDelay=1e3;const W=[],lt=/(((?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])((\u200D(\u2640|\u2642)\uFE0F)|[]))|&([a-zA-Z]{2,6}|#[0-9]{2,5});|<|>)/g,at=/(\s)/;let H=null;class B{constructor(t,e){k(this,B.defaults,e),this._x=t.innerHTML,this._y=t,this._u=this.split.bind(this),H||(H=new M(T,"resize")),this.autoSplit&&this.split(),W.push(this)}destroy(){const t=W.indexOf(this);t>-1&&(this.restore(),W.splice(t,1),W.length||(H.destroy(),H=null))}restore(){return this._y.innerHTML=this._x,H.remove("resize",this._u),this}split(){const t=this._y,e=this._x;if(!e)return this;if(t.innerHTML!==e&&this.restore(),this.byLine){ut(t,j("st-word-temp"));const i=t.children,r=(l,f)=>l?this.lineWrapper(l)+f:"";let h="",s="",b=i[0].offsetTop;H.add("resize",this._u);for(let l=0;l<i.length;l++){const f=i[l],m=f.offsetTop,w=f.tagName==="BR";(b!==m||w)&&(s+=r(h.substring(-1)," "),h=""),w?s+="<br />":h+=f.outerHTML+" ",b=m}t.innerHTML=s+r(h,""),t.innerHTML=ht(t,"st-word-temp")}return this.byWord&&ut(t,this.wordWrapper),this.byChar&&(t.innerHTML=nt(t,this.charWrapper),t.innerHTML=J(t,"",i=>at.test(i)?i:this.charWrapper(i),this.preserve)),this}}B.defaults={autoSplit:!0,byLine:!1,byWord:!1,byChar:!1,preserve:"st-char",lineWrapper:j("st-line"),wordWrapper:j("st-word"),charWrapper:j("st-char")};function j(n){return t=>'<span class="'+n+'">'+t+"</span>"}function N(n,t,e){const i=n.childNodes;let r="";for(let h=0;h<i.length;h++){let s=i[h];s.nodeType===3?r+=t(s.data):s.nodeType===1&&(r+=e(s))}return r}function rt(n){return N(n,t=>t.replace("<","[<]"),t=>$(t,rt(t)))}function nt(n,t){return N(n,e=>e.replace(lt,t),e=>$(e,nt(e,t)))}function J(n,t,e,i){return N(n,r=>{const h=r.trim(),s=r.charAt(r.length-1)===" "?" ":"";return h!==""?(t===""?r:h).split(t).map(e).join(t)+s:r},r=>i&&r.classList.contains(i)?r.outerHTML:$(r,J(r,t,e,i)))}function ht(n,t){return N(n,e=>e,e=>e.classList.contains(t)?e.innerHTML:$(e,ht(e,t)))}function $(n,t){return n.outerHTML.replace(">"+n.innerHTML+"<",">"+t+"<")}function ut(n,t){n.innerHTML=rt(n),n.innerHTML=J(n," ",t).replace("[<]","&lt;")}B.destroy=function(){for(;W[0];)W[0].destroy()};export{R as MainLoopEntry,_ as ScrollObserver,B as SplittedText,M as ThrottledEvent,P as Tween,a as Vector2,st as easings};
